<!DOCTYPE html>
<html>
  <head>
    <title>Cmdslice</title>
    <%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track' => true %>
    <%= javascript_include_tag 'application', 'data-turbolinks-track' => true %>
    <%= csrf_meta_tags %>
  </head>
  <body>
    <div class="navbar">
      <div class="navbar-inner">
        <div class="site-logo">
          <%= link_to 'CodeSlice', '/' %>
        </div>
        <form action="#" class="navbar-search" method="get">
          <input type="text" name="q" class="search" value="<%= params[:q] %>"
          placeholder="search" >
        </form>
        <div class="navbar-account">
          <ul>
            <% if current_user %>
              <li><%= link_to current_user.nickname, user_path(current_user) %></li><!--
              --><li><%= link_to "log out", "/account/logout" %></li>
            <% else %>
              <li><%= link_to "log in", "/account/login" %></li><!--
              --><li><%= link_to "sign up", "/account/signup" %></li>
            <% end %>
          </ul>
        </div>
      </div>
    </div>

    <header class="top-fixed">
      <p><%= flash[:notice] %></p><br>
      好记性不如烂笔头<br>
      The palest ink is better than the best memory.
    </header>

    <div class="clearfix container">
      <section>
        <%= yield %>
      </section>

      <aside>
        <% if current_user %>
          <%= current_user.nickname %>
        <% else %>
          sidebar
        <% end %>
      </aside>
    </div>

    <script>
      hljs.initHighlightingOnLoad();

      document.addEventListener('DOMContentLoaded', function(e){
        var sts = document.getElementsByClassName("se_text");
        for(i=0; i<sts.length; i++) {
          var md = marked(sts[i].innerHTML);
          sts[i].innerHTML = md;
        }
      });
    </script>
  </body>
</html>
